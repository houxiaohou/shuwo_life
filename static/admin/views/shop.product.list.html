<h3>店铺产品列表</h3>

<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">店铺信息</div>
      <div class="panel-body">
        <table class="table table-striped table-hover" role="grid">
          <thead>
          <tr role="row">
            <th>id</th>
            <th>店铺logo</th>
            <th>店铺名称</th>
            <th>店铺地址</th>
            <th>联系人</th>
            <th>电话</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>{{shop.shopid}}</td>
            <td>
              <img ng-src="{{shop.simgurl}}" alt="" width="60"/>
            </td>
            <td>{{shop.spn}}</td>
            <td>{{shop.spadr}}</td>
            <td>{{shop.contacts}}</td>
            <td>{{shop.phone}}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading">产品列表</div>
      <div class="panel-body">
        <p class="text-center" ng-show="loading"><i class="fa fa-spinner fa-spin fa-2x"></i></p>
        <table class="table table-striped table-hover" role="grid" ng-show="!loading">
          <thead>
          <tr role="row">
            <th>id</th>
            <th>产品图片</th>
            <th>产品名称</th>
            <th>原价</th>
            <th>售价</th>
            <th>是否在售</th>
            <th>操作</th>
          </tr>
          </thead>
          <tbody>
          <tr role="row" ng-repeat="p in products">
            <td>{{p.productid}}</td>
            <td>
              <img ng-src="{{p.pimgurl}}" alt="" width="60" ng-show="p.pimgurl.length>0"/>
            </td>
            <td>{{p.productname}}</td>
            <td>{{p.price}}</td>
            <td>{{p.discount}}</td>
            <td>
              <label class="switch">
                <input type="checkbox" ng-model="p.issale" ng-change="changeSaleStatus(p);">
                <span></span>
              </label>
            </td>
            <td class="op">
              <i class="fa fa-trash" ng-click="selectProduct(p);" bs-popover data-template="confirmRemove.html" data-placement="top" data-animation="am-flip-x"></i>
              <a ui-sref="shuwo.shop.product.edit({productId:p.productid})" bs-tooltip data-title="编辑产品"><i class="fa fa-edit"></i></a>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div class="panel-footer">
        <a ui-sref="shuwo.shop.product.add" class="btn btn-success btn-sm"><i class="fa fa-plus"></i> 添加产品</a>
      </div>
    </div>
  </div>
</div>

<script type="text/ng-template" id="confirmRemove.html">
  <div class="popover" tabindex="-1">
    <div class="arrow"></div>
    <h3 class="popover-title">确认删除？</h3>
    <div class="popover-content text-center">
      <form name="changeGroupNameForm">
        <div class="text-center">
          <button type="button" class="btn btn-danger btn-sm" style="width: 45%;" ng-click="removeProduct(this)">删除
          </button>
          <button type="button" class="btn btn-default btn-sm" style="width: 45%;" ng-click="$event.preventDefault();$hide();">取消
          </button>
        </div>
      </form>
    </div>
  </div>
</script>
